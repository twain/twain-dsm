<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Twain_DSM: CTwnDsmLog Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>CTwnDsmLog Class Reference</h1><!-- doxytag: class="CTwnDsmLog" --><code>#include &lt;<a class="el" href="dsm_8h-source.html">dsm.h</a>&gt;</code>
<p>
Collaboration diagram for CTwnDsmLog:<p><center><img src="classCTwnDsmLog__coll__graph.png" border="0" usemap="#CTwnDsmLog__coll__map" alt="Collaboration graph"></center>
<map name="CTwnDsmLog__coll__map">
<area shape="rect" href="classCTwnDsmLogImpl.html" title="Our implementation class where we hide our attributes." alt="" coords="65,203,196,229"><area shape="rect" title="m_ptwndsmlogimpl" alt="" coords="127,225,135,233"><area shape="rect" title="m_ptwndsmlogimpl" alt="" coords="127,289,135,297"><area shape="rect" href="structCTwnDsmLogImpl_1_1__pod.html" title="We use a pod system because it help prevents us from making dumb initialization mistakes..." alt="" coords="47,112,215,139"><area shape="rect" title="pod" alt="" coords="127,135,135,143"><area shape="rect" title="pod" alt="" coords="127,199,135,207"><area shape="rect" title="m_logpath\nm_logmode" alt="" coords="27,28,35,36"><area shape="rect" title="m_logpath\nm_logmode" alt="" coords="85,108,93,116"><area shape="rect" title="m_plog" alt="" coords="127,28,135,36"><area shape="rect" title="m_plog" alt="" coords="127,108,135,116"><area shape="rect" title="m_message" alt="" coords="204,28,212,36"><area shape="rect" title="m_message" alt="" coords="149,108,157,116"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classCTwnDsmLog-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Our logging class. 
<p>
We use the impl to encapsulate the private portions of the class, which doesn't matter for this class so much as it does for the next one. Then we give ourselves an extern, because life is easier if we treat this object as globally accessible (think of it like a service). 
<p>

<p>
Definition at line <a class="el" href="dsm_8h-source.html#l00335">335</a> of file <a class="el" href="dsm_8h-source.html">dsm.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmLog.html#ba8dff5aba0453712fd7229e4d7929c4">CTwnDsmLog</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <a class="el" href="classCTwnDsmLog.html" title="Our logging class.">CTwnDsmLog</a> constructor.  <a href="#ba8dff5aba0453712fd7229e4d7929c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmLog.html#ec6d7d01788bbff1d3091f4de6ae6884">~CTwnDsmLog</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <a class="el" href="classCTwnDsmLog.html" title="Our logging class.">CTwnDsmLog</a> destructor.  <a href="#ec6d7d01788bbff1d3091f4de6ae6884"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmLog.html#520659577f02fdc3bb3f76def1cd3267">Log</a> (int _doassert, char *_file, int _line, char *_format,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The logging function.  <a href="#520659577f02fdc3bb3f76def1cd3267"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="562adf63afde79860ece91dd04bd77e8"></a><!-- doxytag: member="CTwnDsmLog::m_ptwndsmlogimpl" ref="562adf63afde79860ece91dd04bd77e8" args="" -->
<a class="el" href="classCTwnDsmLogImpl.html">CTwnDsmLogImpl</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmLog.html#562adf63afde79860ece91dd04bd77e8">m_ptwndsmlogimpl</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The implementation pointer helps with encapulation. <br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ba8dff5aba0453712fd7229e4d7929c4"></a><!-- doxytag: member="CTwnDsmLog::CTwnDsmLog" ref="ba8dff5aba0453712fd7229e4d7929c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTwnDsmLog::CTwnDsmLog           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The <a class="el" href="classCTwnDsmLog.html" title="Our logging class.">CTwnDsmLog</a> constructor. 
<p>
This is where we see if we have a file in the TWAINDSM_LOG environment variable. If so, then we'll log stuff. If not, then we'll log nothing. TWAINDSM_LOGMODE selects how we open the file. The default value is "w", which means it's wiped out each time a new session is started. Setting this environmental to "a" will cause the log information to be appended to an existing file (a new one will still be created if needed... 
<p>
Definition at line <a class="el" href="log_8cpp-source.html#l00086">86</a> of file <a class="el" href="log_8cpp-source.html">log.cpp</a>.
<p>
References <a class="el" href="log_8cpp-source.html#l00026">kLOGENV</a>, <a class="el" href="log_8cpp-source.html#l00034">kLOGMODEENV</a>, <a class="el" href="dsm_8h-source.html#l00283">kPANIC</a>, <a class="el" href="log_8cpp-source.html#l00070">CTwnDsmLogImpl::_pod::m_logmode</a>, <a class="el" href="log_8cpp-source.html#l00069">CTwnDsmLogImpl::_pod::m_logpath</a>, <a class="el" href="log_8cpp-source.html#l00068">CTwnDsmLogImpl::_pod::m_message</a>, <a class="el" href="dsm_8h-source.html#l00369">m_ptwndsmlogimpl</a>, <a class="el" href="dsm_8h-source.html#l00163">NCHARS</a>, <a class="el" href="classCTwnDsmLogImpl.html#3a989ef097aba7711b3555485162dcfd">CTwnDsmLogImpl::pod</a>, <a class="el" href="dsm_8h-source.html#l00224">SGETENV</a>, <a class="el" href="dsm_8h-source.html#l00221">SSTRCPY</a>, and <a class="el" href="log_8cpp-source.html#l00040">TWNDSM_MAX_MSG</a>.
</div>
</div><p>
<a class="anchor" name="ec6d7d01788bbff1d3091f4de6ae6884"></a><!-- doxytag: member="CTwnDsmLog::~CTwnDsmLog" ref="ec6d7d01788bbff1d3091f4de6ae6884" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTwnDsmLog::~CTwnDsmLog           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The <a class="el" href="classCTwnDsmLog.html" title="Our logging class.">CTwnDsmLog</a> destructor. 
<p>
Make sure the log is closed, free the buffer and destroy our implementation class... 
<p>
Definition at line <a class="el" href="log_8cpp-source.html#l00119">119</a> of file <a class="el" href="log_8cpp-source.html">log.cpp</a>.
<p>
References <a class="el" href="log_8cpp-source.html#l00068">CTwnDsmLogImpl::_pod::m_message</a>, <a class="el" href="log_8cpp-source.html#l00067">CTwnDsmLogImpl::_pod::m_plog</a>, <a class="el" href="dsm_8h-source.html#l00369">m_ptwndsmlogimpl</a>, and <a class="el" href="classCTwnDsmLogImpl.html#3a989ef097aba7711b3555485162dcfd">CTwnDsmLogImpl::pod</a>.
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="520659577f02fdc3bb3f76def1cd3267"></a><!-- doxytag: member="CTwnDsmLog::Log" ref="520659577f02fdc3bb3f76def1cd3267" args="(int _doassert, char *_file, int _line, char *_format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CTwnDsmLog::Log           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_doassert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The logging function. 
<p>
This should only be access through the kLOG macro... <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_doassert</em>&nbsp;</td><td>decides if we assert or not </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_file</em>&nbsp;</td><td>the source file of the message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_line</em>&nbsp;</td><td>the source line of the message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_format</em>&nbsp;</td><td>the format of the message (same as sprintf) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>...</em>&nbsp;</td><td>arguments to the format of the message </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="log_8cpp-source.html#l00153">153</a> of file <a class="el" href="log_8cpp-source.html">log.cpp</a>.
<p>
References <a class="el" href="dsm_8h-source.html#l00179">FOPEN</a>, <a class="el" href="dsm_8h-source.html#l00177">GETTHREADID</a>, <a class="el" href="log_8cpp-source.html#l00070">CTwnDsmLogImpl::_pod::m_logmode</a>, <a class="el" href="log_8cpp-source.html#l00069">CTwnDsmLogImpl::_pod::m_logpath</a>, <a class="el" href="log_8cpp-source.html#l00068">CTwnDsmLogImpl::_pod::m_message</a>, <a class="el" href="log_8cpp-source.html#l00067">CTwnDsmLogImpl::_pod::m_plog</a>, <a class="el" href="dsm_8h-source.html#l00369">m_ptwndsmlogimpl</a>, <a class="el" href="classCTwnDsmLogImpl.html#3a989ef097aba7711b3555485162dcfd">CTwnDsmLogImpl::pod</a>, <a class="el" href="dsm_8h-source.html#l00170">SNPRINTF</a>, <a class="el" href="dsm_8h-source.html#l00068">TWNDSM_CMP_VERSION</a>, and <a class="el" href="log_8cpp-source.html#l00040">TWNDSM_MAX_MSG</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="dsm_8h-source.html">dsm.h</a><li><a class="el" href="log_8cpp-source.html">log.cpp</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 12 18:27:17 2007 for Twain_DSM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
