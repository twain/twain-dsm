<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Twain_DSM: CTwnDsmAppsImpl Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>CTwnDsmAppsImpl Class Reference</h1><!-- doxytag: class="CTwnDsmAppsImpl" -->Collaboration diagram for CTwnDsmAppsImpl:<p><center><img src="classCTwnDsmAppsImpl__coll__graph.png" border="0" usemap="#CTwnDsmAppsImpl__coll__map" alt="Collaboration graph"></center>
<map name="CTwnDsmAppsImpl__coll__map">
<area shape="rect" href="structCTwnDsmAppsImpl_1_1__pod.html" title="We use a pod system because it help prevents us from making dumb initialization mistakes..." alt="" coords="352,368,528,395"><area shape="rect" title="pod" alt="" coords="436,391,444,399"><area shape="rect" title="pod" alt="" coords="436,455,444,463"><area shape="rect" title="m_conditioncode" alt="" coords="515,119,523,127"><area shape="rect" title="m_conditioncode" alt="" coords="444,364,452,372"><area shape="rect" href="structDS__LIST.html" title="Structure to hold a list of Data Sources." alt="" coords="421,187,496,213"><area shape="rect" title="NumFiles" alt="" coords="483,119,491,127"><area shape="rect" title="NumFiles" alt="" coords="452,183,460,191"><area shape="rect" href="structAPP__INFO.html" title="Structure to hold data about a connected application, we use DS_LIST so we don&#39;t..." alt="" coords="240,277,331,304"><area shape="rect" title="m_AppInfo" alt="" coords="304,300,312,308"><area shape="rect" title="m_AppInfo" alt="" coords="413,364,421,372"><area shape="rect" title="identity" alt="" coords="55,28,63,36"><area shape="rect" title="identity" alt="" coords="236,277,244,285"><area shape="rect" href="structDS__INFO.html" title="Describes everything we need to know about the Data Source over the course of the..." alt="" coords="348,96,428,123"><area shape="rect" title="Identity" alt="" coords="73,28,81,36"><area shape="rect" title="Identity" alt="" coords="344,101,352,109"><area shape="rect" title="hwnd" alt="" coords="137,209,145,217"><area shape="rect" title="hwnd" alt="" coords="236,273,244,281"><area shape="rect" title="pDSList" alt="" coords="447,209,455,217"><area shape="rect" title="pDSList" alt="" coords="327,280,335,288"><area shape="rect" title="DSInfo" alt="" coords="387,119,395,127"><area shape="rect" title="DSInfo" alt="" coords="431,183,439,191"><area shape="rect" title="pHandle" alt="" coords="648,28,656,36"><area shape="rect" title="pHandle" alt="" coords="424,97,432,105"><area shape="rect" title="bCallbackPending" alt="" coords="183,28,191,36"><area shape="rect" title="bCallbackPending" alt="" coords="344,101,352,109"><area shape="rect" title="szPath" alt="" coords="295,28,303,36"><area shape="rect" title="szPath" alt="" coords="367,92,375,100"><area shape="rect" title="DS_Entry" alt="" coords="391,28,399,36"><area shape="rect" title="DS_Entry" alt="" coords="385,92,393,100"><area shape="rect" title="twcallback" alt="" coords="517,28,525,36"><area shape="rect" title="twcallback" alt="" coords="408,92,416,100"><area shape="rect" title="CurrentState" alt="" coords="225,209,233,217"><area shape="rect" title="CurrentState" alt="" coords="252,273,260,281"><area shape="rect" title="ConditionCode" alt="" coords="332,209,340,217"><area shape="rect" title="ConditionCode" alt="" coords="291,273,299,281"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classCTwnDsmAppsImpl-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Impl Class to hold list of connected applications. 
<p>
In 32bit enviroments each application will connect to a seperate instance of DSM data but with this list it allows ONE application to connect several time, as long as it uses a different name with each connection. I'm still not sure why you'd want to do that, but there it is. This class is intended to hide the gory details of how we're storing the data, so an impl is used. 
<p>

<p>
Definition at line <a class="el" href="apps_8cpp-source.html#l00074">74</a> of file <a class="el" href="apps_8cpp-source.html">apps.cpp</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="863118f5adb0739967963cbade652ee0"></a><!-- doxytag: member="CTwnDsmAppsImpl::CTwnDsmAppsImpl" ref="863118f5adb0739967963cbade652ee0" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#863118f5adb0739967963cbade652ee0">CTwnDsmAppsImpl</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Our <a class="el" href="classCTwnDsmAppsImpl.html" title="Impl Class to hold list of connected applications.">CTwnDsmAppsImpl</a> constructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#b96b51cb8e39d0ca8095b88f08e3fb8d">scanDSDir</a> (char *_szAbsPath, TW_IDENTITY *_pAppId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scan for Data Sources.  <a href="#b96b51cb8e39d0ca8095b88f08e3fb8d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#120ac2d0f6c28a29c44a7fef02ead6e8">StringFromCC</a> (const TW_UINT16 cc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Translates the cc passed in into a string and returns it.  <a href="#120ac2d0f6c28a29c44a7fef02ead6e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">TW_INT16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#1aeec27e0e605225a454245d514fc383">LoadDS</a> (TW_IDENTITY *_pAppId, char *_pPath, TW_UINT32 _DsId, bool _boolKeepOpen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loads a DS from disk and adds it to a global list of DS's.  <a href="#1aeec27e0e605225a454245d514fc383"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#af20cb60ab3c72ae44ee5dd6176c37c2">AppSetConditionCode</a> (TW_IDENTITY *_pAppId, TW_UINT16 conditioncode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the condition code.  <a href="#af20cb60ab3c72ae44ee5dd6176c37c2"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7b3760aa73416adc1ed96c0b449590ae"></a><!-- doxytag: member="CTwnDsmAppsImpl::pod" ref="7b3760aa73416adc1ed96c0b449590ae" args="" -->
<a class="el" href="structCTwnDsmAppsImpl_1_1__pod.html">CTwnDsmAppsImpl::_pod</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTwnDsmAppsImpl.html#7b3760aa73416adc1ed96c0b449590ae">pod</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We use a pod system because it help prevents us from making dumb initialization mistakes. <br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCTwnDsmAppsImpl_1_1__pod.html">_pod</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We use a pod system because it help prevents us from making dumb initialization mistakes.  <a href="structCTwnDsmAppsImpl_1_1__pod.html#_details">More...</a><br></td></tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b96b51cb8e39d0ca8095b88f08e3fb8d"></a><!-- doxytag: member="CTwnDsmAppsImpl::scanDSDir" ref="b96b51cb8e39d0ca8095b88f08e3fb8d" args="(char *_szAbsPath, TW_IDENTITY *_pAppId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CTwnDsmAppsImpl::scanDSDir           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>_szAbsPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TW_IDENTITY *&nbsp;</td>
          <td class="paramname"> <em>_pAppId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Scan for Data Sources. 
<p>
Recursively navigate the TWAIN datasource dir looking for data sources. Store all valid data sources in _pList upto a maximum of MAX_NUM_DS data sources. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_szAbsPath</em>&nbsp;</td><td>starting directory to begin search. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>_pAppId</em>&nbsp;</td><td>the application requesting scan. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>either EXIT_SUCCESS or EXIT_FAILURE. </dd></dl>

<p>
Definition at line <a class="el" href="apps_8cpp-source.html#l00734">734</a> of file <a class="el" href="apps_8cpp-source.html">apps.cpp</a>.
<p>
References <a class="el" href="apps_8cpp-source.html#l00943">LoadDS()</a>, <a class="el" href="apps_8cpp-source.html#l00137">CTwnDsmAppsImpl::_pod::m_AppInfo</a>, <a class="el" href="dsm_8h-source.html#l00163">NCHARS</a>, <a class="el" href="apps_8cpp-source.html#l00042">DS_LIST::NumFiles</a>, <a class="el" href="apps_8cpp-source.html#l00059">APP_INFO::pDSList</a>, <a class="el" href="classCTwnDsmAppsImpl.html#7b3760aa73416adc1ed96c0b449590ae">pod</a>, <a class="el" href="dsm_8h-source.html#l00170">SNPRINTF</a>, <a class="el" href="dsm_8h-source.html#l00225">SSNPRINTF()</a>, <a class="el" href="dsm_8h-source.html#l00222">SSTRCAT</a>, and <a class="el" href="dsm_8h-source.html#l00221">SSTRCPY</a>.
</div>
</div><p>
<a class="anchor" name="120ac2d0f6c28a29c44a7fef02ead6e8"></a><!-- doxytag: member="CTwnDsmAppsImpl::StringFromCC" ref="120ac2d0f6c28a29c44a7fef02ead6e8" args="(const TW_UINT16 cc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * CTwnDsmAppsImpl::StringFromCC           </td>
          <td>(</td>
          <td class="paramtype">const TW_UINT16&nbsp;</td>
          <td class="paramname"> <em>cc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Translates the cc passed in into a string and returns it. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cc</em>&nbsp;</td><td>the TWAIN Condition Code to translate </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a string that represents the cc </dd></dl>

<p>
Definition at line <a class="el" href="apps_8cpp-source.html#l00624">624</a> of file <a class="el" href="apps_8cpp-source.html">apps.cpp</a>.
<p>
References <a class="el" href="dsm_8h-source.html#l00163">NCHARS</a>, and <a class="el" href="dsm_8h-source.html#l00225">SSNPRINTF()</a>.
<p>
Referenced by <a class="el" href="apps_8cpp-source.html#l00394">AppSetConditionCode()</a>.
</div>
</div><p>
<a class="anchor" name="1aeec27e0e605225a454245d514fc383"></a><!-- doxytag: member="CTwnDsmAppsImpl::LoadDS" ref="1aeec27e0e605225a454245d514fc383" args="(TW_IDENTITY *_pAppId, char *_pPath, TW_UINT32 _DsId, bool _boolKeepOpen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TW_INT16 CTwnDsmAppsImpl::LoadDS           </td>
          <td>(</td>
          <td class="paramtype">TW_IDENTITY *&nbsp;</td>
          <td class="paramname"> <em>_pAppId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>_pPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TW_UINT32&nbsp;</td>
          <td class="paramname"> <em>_DsId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>_boolKeepOpen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loads a DS from disk and adds it to a global list of DS's. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_pAppId</em>&nbsp;</td><td>Origin of message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_pPath</em>&nbsp;</td><td>The path to the library to open </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_DsId</em>&nbsp;</td><td>the source array index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_boolKeepOpen</em>&nbsp;</td><td>if set to true keeps DS open after successful load </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a valid TWRC_xxxx return code </dd></dl>

<p>
Definition at line <a class="el" href="apps_8cpp-source.html#l00943">943</a> of file <a class="el" href="apps_8cpp-source.html">apps.cpp</a>.
<p>
References <a class="el" href="apps_8cpp-source.html#l00394">AppSetConditionCode()</a>, <a class="el" href="apps_8cpp-source.html#l00029">DS_INFO::DS_Entry</a>, <a class="el" href="apps_8cpp-source.html#l00043">DS_LIST::DSInfo</a>, <a class="el" href="apps_8cpp-source.html#l00027">DS_INFO::Identity</a>, <a class="el" href="dsm_8h-source.html#l00275">kLOG</a>, <a class="el" href="dsm_8h-source.html#l00269">kLOGERR</a>, <a class="el" href="dsm_8h-source.html#l00268">kLOGINFO</a>, <a class="el" href="dsm_8h-source.html#l00165">LOADFUNCTION</a>, <a class="el" href="dsm_8h-source.html#l00164">LOADLIBRARY</a>, <a class="el" href="apps_8cpp-source.html#l00137">CTwnDsmAppsImpl::_pod::m_AppInfo</a>, <a class="el" href="dsm_8h-source.html#l00296">MAX_NUM_DS</a>, <a class="el" href="dsm_8h-source.html#l00163">NCHARS</a>, <a class="el" href="apps_8cpp-source.html#l00059">APP_INFO::pDSList</a>, <a class="el" href="apps_8cpp-source.html#l00028">DS_INFO::pHandle</a>, <a class="el" href="classCTwnDsmAppsImpl.html#7b3760aa73416adc1ed96c0b449590ae">pod</a>, <a class="el" href="dsm_8h-source.html#l00223">SSTRNCPY</a>, <a class="el" href="apps_8cpp-source.html#l00030">DS_INFO::szPath</a>, and <a class="el" href="dsm_8h-source.html#l00166">UNLOADLIBRARY</a>.
<p>
Referenced by <a class="el" href="apps_8cpp-source.html#l00913">CTwnDsmApps::LoadDS()</a>, and <a class="el" href="apps_8cpp-source.html#l00734">scanDSDir()</a>.
</div>
</div><p>
<a class="anchor" name="af20cb60ab3c72ae44ee5dd6176c37c2"></a><!-- doxytag: member="CTwnDsmAppsImpl::AppSetConditionCode" ref="af20cb60ab3c72ae44ee5dd6176c37c2" args="(TW_IDENTITY *_pAppId, TW_UINT16 conditioncode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CTwnDsmAppsImpl::AppSetConditionCode           </td>
          <td>(</td>
          <td class="paramtype">TW_IDENTITY *&nbsp;</td>
          <td class="paramname"> <em>_pAppId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TW_UINT16&nbsp;</td>
          <td class="paramname"> <em>conditioncode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the condition code. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_pAppId</em>&nbsp;</td><td>Origin of message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>conditioncode</em>&nbsp;</td><td>new code to remember </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="apps_8cpp-source.html#l00394">394</a> of file <a class="el" href="apps_8cpp-source.html">apps.cpp</a>.
<p>
References <a class="el" href="apps_8cpp-source.html#l00057">APP_INFO::ConditionCode</a>, <a class="el" href="apps_8cpp-source.html#l00056">APP_INFO::identity</a>, <a class="el" href="dsm_8h-source.html#l00275">kLOG</a>, <a class="el" href="dsm_8h-source.html#l00268">kLOGINFO</a>, <a class="el" href="apps_8cpp-source.html#l00137">CTwnDsmAppsImpl::_pod::m_AppInfo</a>, <a class="el" href="apps_8cpp-source.html#l00138">CTwnDsmAppsImpl::_pod::m_conditioncode</a>, <a class="el" href="classCTwnDsmAppsImpl.html#7b3760aa73416adc1ed96c0b449590ae">pod</a>, and <a class="el" href="apps_8cpp-source.html#l00624">StringFromCC()</a>.
<p>
Referenced by <a class="el" href="apps_8cpp-source.html#l00381">CTwnDsmApps::AppSetConditionCode()</a>, and <a class="el" href="apps_8cpp-source.html#l00943">LoadDS()</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="apps_8cpp-source.html">apps.cpp</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 12 18:27:17 2007 for Twain_DSM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
